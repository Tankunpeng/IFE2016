# 需求陈述

> 如图（打开查看），创建一个虚拟宇宙，包括一个行星和飞船
> 每个飞船由以下部分组成
> 动力系统，可以完成飞行和停止飞行两个行为，暂定所有飞船的动力系统飞行速度是一致的，比如每秒20px，飞行过程中会按照一定速率消耗能源（比如每秒减5%）
> 能源系统，提供能源，并且在宇宙中通过太阳能充电（比如每秒增加2%，具体速率自定）
> 信号接收处理系统，用于接收行星上的信号
> 自爆系统，用于自我销毁
> 每个飞船的能源是有限的，用一个属性来表示能源剩余量，这是一个百分比，表示还剩余多少能源。
> 能源耗尽时，飞船会自动停止飞行
> 飞船有两个状态：飞行中和停止，飞船的行为会改变这个属性状态
> 飞船的自我销毁方法会立即销毁飞船自身
> 行星上有一个指挥官（不需要在页面上表现出其形象），指挥官可以通过行星上的信号发射器发布如下命令
> 创建一个新的飞船进入轨道，最多可以创建4个飞船，刚被创建的飞船会停留在某一个轨道上静止不动
> 命令某个飞船开始飞行，飞行后飞船会围绕行星做环绕运动，需要模拟出这个动画效果
> 命令某个飞船停止飞行
> 命令某个飞船销毁，销毁后飞船消失、飞船标示可以用于下次新创建的飞船
> 你需要设计类似如下指令格式的数据格式
>             {
>                 id: 1,
>                 commond: 'stop'
>             }
>         
> 指挥官通过信号发射器发出的命令是通过一种叫做Mediator的介质进行广播
> Mediator是单向传播的，只能从行星发射到宇宙中，在发射过程中，有30%的信息传送失败（丢包）概率，你需要模拟这个丢包率，另外每次信息正常传送的时间需要1秒
> 指挥官并不知道自己的指令是不是真的传给了飞船，飞船的状态他是不知道的，他只能通过自己之前的操作来假设飞船当前的状态
> 每个飞船通过信号接收器，接受到通过Mediator传达过来的指挥官的广播信号，但因为是广播信号，所以每个飞船能接受到指挥官发出给所有飞船的所有指令，因此需要通过读取信息判断这个指令是不是发给自己的

对象提取：
虚拟宇宙、行星、飞船、指挥官、信号发射器、Mediator
飞船结构：
- 动力系统：*方法* 飞行、停止
- 能源系统：*方法* 充电、消耗
- 信号接受系统：*方法* 接受通过Mediator传达过来的指挥官的广播信号，但因为是广播信号，所以每个飞船能接受到指挥官发出给所有飞船的所有指令，因此需要通过读取信息判断这个指令是不是发给自己的
- 自毁系统：*方法* 自毁

飞船
属性：能源
行为：停止，飞行

行星：
包含： 指挥官、信号发射器，指挥官 使用 信号发射器 发送命令

命令：
内容：
1. 创建一个新的飞船进入轨道，最多可以创建4个飞船，刚被创建的飞船会停留在某一个轨道上静止不动
2. 命令某个飞船开始飞行，飞行后飞船会围绕行星做环绕运动，需要模拟出这个动画效果
3. 命令某个飞船停止飞行
4. 命令某个飞船销毁，销毁后飞船消失、飞船标示可以用于下次新创建的飞船
数据格式：
{
id：1，
commond：'stop'
}

Mediator：
传播指令的介质
单向传播：行星-> 宇宙
30%丢包率
1次消息传递耗时 1s

其他约定：指令官不知道飞船实际状态，通过自己的操作假设飞船的状态

#用例

用例名称：创建飞船
概述：创建一个新的飞船进入轨道，最多可以创建4个飞船，刚被创建的飞船会停留在某一个轨道上静止不动
参与者：指挥官
前置条件：系统启动
主序列：
    1. 指挥官发送创建飞船命令
    2. 创建新的飞船
    3. 飞船进入行星的某个轨道停留，静止不动
可替换序列：
    2. 如果已有4个飞船，不再创建
后置条件：无


用例名称：命令某个飞船起飞
概述：命令某个飞船开始飞行，飞行后飞船会围绕行星做环绕运动，需要模拟出这个动画效果
参与者：指挥官
前置条件：某飞船存在
主序列：
    1. 指挥官发送飞船起飞命令 
    2. 命令通过Mediator在宇宙中传播
    3. 1s钟后所有飞船收到命令
    4. 指挥官指定的飞船执行起飞指令
    
可替换序列：
    3. 有30%的可能命令会丢失，飞船没有接到命令
后置条件：无

用例名称：命令某个飞船停止飞行
概述：命令某个飞船停止飞行
参与者：指挥官
前置条件：某飞船存在
主序列：
    
可替换序列：
    
后置条件：无


用例名称：命令某个飞船销毁
概述：命令某个飞船销毁，销毁后飞船消失、飞船标示可以用于下次新创建的飞船
参与者：指挥官
前置条件：某飞船存在
主序列：
    
可替换序列：
    
后置条件：无


